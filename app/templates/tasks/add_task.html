{% extends "base.html" %}

{% block title %}Добавление заданий{% endblock title %}

{% block content %}
    <div class="add-task-container">
        <p class="paragraph">Добавление заданий</p>
        <form method="POST" id="tasks-form">
            <div class="form-group">
                <i class="fas fa-user" style="left: 14px;"></i>
                <input
                    type="text"
                    name="employee_data"
                    class="employee-data"
                    placeholder="ФИО работника"
                    autocomplete="off"
                    value="{{ employee_data | default('') }}"
                    required
                />
                <div class="employee-data-suggestions suggestions-list"></div>
            </div>

            <div class="form-group">
                <i class="fas fa-calendar-alt" style="left: 14px;"></i>
                <input
                    type="date"
                    name="operation_date"
                    value="{{ operation_date | default('') }}"
                    style="cursor: pointer;"
                />
            </div>

            <div id="tasks-container">
                <div class="task-fields">
                    <p class="task-number">Задание &#8470;1</p>
                    <div class="form-group">
                        <i class="fas fa-cogs" style="left: 14px;"></i>
                        <input
                            type="text"
                            name="order_name[]"
                            class="order-name"
                            placeholder="Наименование заказа"
                            autocomplete="off"
                            required
                        />
                        <div class="order-name-suggestions suggestions-list"></div>
                    </div>
                    <div class="form-group">
                        <i class="fas fa-hashtag" style="left: 14px;"></i>
                        <input
                            type="text"
                            name="order_number[]"
                            value="{{ order_number }}"
                            class="order-number"
                            placeholder="Номер заказа"
                            autocomplete="off"
                            required
                        />
                        <div class="order-number-suggestions suggestions-list"></div>
                    </div>
                    <div class="add-task-buttons-container">
                        <button type="button" class="default-button add-works-button">Добавить работы</button>
                        <button type="button" class="default-button delete-form-task-button">Удалить задание</button>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="add-task-buttons-container">
                <button type="button" id="add-form-task-button" class="default-button add-form-task-button">Добавить задание</button>
                <button type="submit" class="default-button save-form-tasks-button">Сохранить задания</button>
            </div>

            <div id="hidden-work-hours-container" style="display: none;"></div>
        </form>

        <div class="flashed-messages-right">
            {% for category, message in get_flashed_messages(with_categories=true) %}
                <div class="{{ category }}" id="message">
                    <p>{{ message }}</p>
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="modal-container">
        <div class="modal-content">
            <span class="close-modal-button"><i class="fas fa-times"></i></span>
            <p class="modal-text">Вы уверены, что хотите удалить задание?</p>
            <div class="modal-buttons">
                <button id="confirm-delete-task" class="btn btn-danger">Удалить</button>
                <button id="cancel-delete-task" class="btn btn-secondary">Отмена</button>
            </div>
        </div>
    </div>

    <div class="works-modal-container" style="display: none;">
        <div class="works-modal-content">
            <span class="close-works-modal"><i class="fas fa-times"></i></span>
            <table id="works-table" class="works-modal-table">
                <thead>
                    <tr>
                        <th style="width: 60%">Наименование работы</th>
                        <th style="width: 15%;">Плановая трудоемкость</th>
                        <th style="width: 15%;">Фактическая трудоемкость</th>
                        <th style="width: 10%;">Введенные часы</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <button id="save-works" class="btn" style="margin-top: 20px;">Сохранить</button>
        </div>
    </div>
{% endblock content %}
